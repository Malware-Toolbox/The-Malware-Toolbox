#include "pch.h"
#include "Connectors.h"

#include <cstring>

using namespace Runtime::InteropServices;

char* MalwareToolbox::LibraryC::Connectors::cpp_string_to_schar(String^ value)
{
	return static_cast<char*>(safe_cast<void*>(Marshal::StringToHGlobalAnsi(value)));
}

unsigned char* MalwareToolbox::LibraryC::Connectors::cpp_bytearray_to_char(array<Byte>^ value)
{
	const pin_ptr<Byte> p = &value[0];
	return p;
}

String^ MalwareToolbox::LibraryC::Connectors::cs_schar_to_string(char* value)
{
	return gcnew String(value);
}

array<Byte>^ MalwareToolbox::LibraryC::Connectors::cs_char_to_bytearray(unsigned char* value)
{
	const int len = sizeof(value);
	array<Byte>^ byte_array = gcnew array<Byte>(len);
	Marshal::Copy(safe_cast<IntPtr>(value), byte_array, 0, len);
	return byte_array;
}
