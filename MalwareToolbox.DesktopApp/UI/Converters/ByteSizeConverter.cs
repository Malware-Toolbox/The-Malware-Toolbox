using System;
using Microsoft.UI.Xaml.Data;

namespace MalwareToolbox.DesktopApp.UI.Converters;

public class ByteSizeConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        if (value is ulong bytes)
        {
            if (bytes < 1000)
            {
                return $"{bytes} bytes";
            }
            else if (bytes < 1000000)
            {
                return $"{decimal.Divide(bytes, 1000):.0000} KB";
            }
            else if (bytes < 1000000000)
            {
                return $"{decimal.Divide(bytes, 1000000):.0000} MB";
            }
            else if (bytes < 1000000000000)
            {
                return $"{decimal.Divide(bytes, 1000000000):.0000} GB";
            }
            else
            {
                return $"{decimal.Divide(bytes, 1000000000000):.0000} TB";
            }
        }

        return "";
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        // ConvertBack is not implemented for a OneWay binding.
        throw new NotImplementedException();
    }
}
