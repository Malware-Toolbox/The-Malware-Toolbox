using System;
using Microsoft.UI.Xaml;

namespace MalwareToolbox.DesktopApp.Core.NewTeachingTips.Triggers;

public class RoutedStepTrigger : IStepTrigger
{
    private readonly Action<RoutedEventHandler> _addCallback;
    private readonly Action<RoutedEventHandler> _removeCallback;

    private Action _action;

    public RoutedStepTrigger(Action<RoutedEventHandler> addCallback, Action<RoutedEventHandler> removeCallback)
    {
        _addCallback = addCallback;
        _removeCallback = removeCallback;
    }

    public void StartTrigger(Action action)
    {
        _action = action;

        _addCallback(OnTrigger);
    }

    public void StopTrigger()
    {
        _removeCallback(OnTrigger);
    }

    private void OnTrigger(object sender, RoutedEventArgs routedEventArgs)
    {
        _action();
    }
}
