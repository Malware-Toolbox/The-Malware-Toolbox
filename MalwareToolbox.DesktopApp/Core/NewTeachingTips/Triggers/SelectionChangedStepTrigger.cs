using System;
using Microsoft.UI.Xaml.Controls;

namespace MalwareToolbox.DesktopApp.Core.NewTeachingTips.Triggers;

public class SelectionChangedStepTrigger : IStepTrigger
{
    private readonly Action<SelectionChangedEventHandler> _addCallback;
    private readonly Action<SelectionChangedEventHandler> _removeCallback;

    private Action _action;

    public SelectionChangedStepTrigger(Action<SelectionChangedEventHandler> addCallback, Action<SelectionChangedEventHandler> removeCallback)
    {
        _addCallback = addCallback;
        _removeCallback = removeCallback;
    }

    public void StartTrigger(Action action)
    {
        _action = action;

        _addCallback(OnTrigger);
    }

    public void StopTrigger()
    {
        _removeCallback(OnTrigger);
    }

    private void OnTrigger(object sender, SelectionChangedEventArgs routedEventArgs)
    {
        _action();
    }
}
