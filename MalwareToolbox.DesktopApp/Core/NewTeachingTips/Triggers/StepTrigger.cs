using System;
using Microsoft.UI.Xaml;

namespace MalwareToolbox.DesktopApp.Core.NewTeachingTips.Triggers;

public class StepTrigger : IStepTrigger
{
    private readonly Action<EventHandler> _addCallback;
    private readonly Action<EventHandler> _removeCallback;

    private Action _action;

    public StepTrigger(Action<EventHandler> addCallback, Action<EventHandler> removeCallback)
    {
        _addCallback = addCallback;
        _removeCallback = removeCallback;
    }

    public void StartTrigger(Action action)
    {
        _action = action;
        
        _addCallback(OnTrigger);
    }

    public void StopTrigger()
    {
        _removeCallback(OnTrigger);
    }

    private void OnTrigger(object sender, EventArgs routedEventArgs)
    {
        _action();
    }
}
