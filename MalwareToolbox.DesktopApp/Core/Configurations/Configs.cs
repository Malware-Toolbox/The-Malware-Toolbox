using System.Collections.Generic;
using MalwareToolbox.LibraryC.Strings;

namespace MalwareToolbox.DesktopApp.Core.Configurations;

public class Configs
{
    public static readonly Config<int> StringsMinLength = new("StringsMinLength", 4);
    public static readonly Config<int> StringsMaxLength = new("StringsMaxLength", 1024);
    public static readonly Config<StringsDuplicateMode> StringsStringsDuplicateMode = new("StringsStringsDuplicateMode", StringsDuplicateMode.Keep);

    private static readonly List<ConfigKey> _configurationKeys = new();

    public static List<ConfigKey> ConfigurationKeys => _configurationKeys;

    public class Config<T> : ConfigKey
    {
        public T DefaultValue { get; }

        public Config(string key, T defaultValue) : base(key)
        {
            DefaultValue = defaultValue;
        }
    }

    public abstract class ConfigKey
    {
        public string Key { get; }

        protected ConfigKey(string key)
        {
            Key = key;
            _configurationKeys.Add(this);
        }
    }
}
