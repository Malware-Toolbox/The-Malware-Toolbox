using System.Collections;
using MalwareToolbox.LibraryC.RegShot;
using Newtonsoft.Json;

namespace MalwareToolbox.DesktopApp.Core.Configurations;

public class HkeyConfigHandler : IConfigHandler
{
    public T ToConfigData<T>(Config<T> config, object value)
    {
        if (typeof(RegistryHiveType).IsAssignableFrom(typeof(T)))
        {
            return (T)(object)RegistryHiveType.FromString(value.ToString());
        }
        
        return (T)value;
    }

    public object ToSettingsData<T>(Config<T> config, T value)
    {
        if (value is RegistryHiveType hiveType)
        {
            return hiveType.Name;
        }

        return null;
    }
}
