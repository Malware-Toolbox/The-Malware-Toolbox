using Microsoft.UI.Xaml;
using Microsoft.UI.Xaml.Controls.Primitives;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MalwareToolbox.DesktopApp.Core.TeachingTips.Actions;

public class ButtonAction : ITipAction
{
    private TaskCompletionSource _taskCompletionSource;

    public ButtonBase Button { get; }

    public ButtonAction(ButtonBase button)
    {
        Button = button;
    }

    public Task WaitForAction()
    {
        _taskCompletionSource = new TaskCompletionSource();
        Button.Click += OnButtonClick;
        return _taskCompletionSource.Task;
    }

    private void OnButtonClick(object sender, RoutedEventArgs e)
    {
        _taskCompletionSource.SetResult();
        Button.Click -= OnButtonClick;
        _taskCompletionSource = null;
    }
}
