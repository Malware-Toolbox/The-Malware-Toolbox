<Page
    x:Class="MalwareToolbox.DesktopApp.Views.Tools.DNSReqCapture"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MalwareToolbox.DesktopApp.Views.Tools"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:utils="using:MalwareToolbox.DesktopApp.Core.Utils"
    xmlns:system="using:System"
    mc:Ignorable="d"
    NavigationCacheMode="Enabled">
    <Page.Resources>
        <CollectionViewSource x:Name="RequestCollectionView" 
                              IsSourceGrouped="True"
                              Source="{x:Bind requestListCollection}"/>

        <DataTemplate x:Key="StringsListViewHeaderTemplate" x:DataType="utils:GroupedList">
            <TextBlock Text="{x:Bind Key}" 
                       Style="{ThemeResource BaseTextBlockStyle}"
                       IsTextSelectionEnabled="True"/>
        </DataTemplate>

        <DataTemplate x:Key="StringsListViewTemplate" x:DataType="system:String">
            <ListViewItem Background="{ThemeResource ButtonBackground}">
                <TextBlock Text="{x:Bind}" 
                           Margin="0,5,0,5" 
                           TextWrapping="Wrap"
                           Style="{ThemeResource BodyTextBlockStyle}"
                           IsTextSelectionEnabled="True"/>
            </ListViewItem>
        </DataTemplate>
    </Page.Resources>
    
    <Grid Padding="56,12,56,36">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0" 
                        Orientation="Horizontal"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top">
            <Button Margin="0,0,8,0"
                        Background="DarkOliveGreen"
                        Click="OnClickStart">
                <StackPanel Orientation="Horizontal">
                    <FontIcon Glyph="&#xE768;" FontFamily="Segoe MDL2 Assets" Margin="0,0,8,0" />
                    <TextBlock Text="Start"/>
                </StackPanel>
            </Button>
            <Button Margin="0,0,8,0"
                        
                        Background="Maroon"
                        Click="OnClickEnd">
                <StackPanel Orientation="Horizontal">
                    <FontIcon Glyph="&#xE71A;" FontFamily="Segoe MDL2 Assets" Margin="0,0,8,0" />
                    <TextBlock Text="Stop"/>
                </StackPanel>
            </Button>
        </StackPanel>
        <StackPanel Width="Auto"
                    Margin="1,100">
            <ListView>
                <ScrollViewer MaxHeight="300">
                    <ListView ItemsSource="{x:Bind RequestCollectionView.View, Mode=OneWay}"
                                  ItemTemplate="{StaticResource StringsListViewTemplate}"
                                  SelectionMode="None">
                        <ListView.GroupStyle>
                            <GroupStyle HeaderTemplate="{StaticResource StringsListViewHeaderTemplate}"/>
                        </ListView.GroupStyle>

                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <ItemsStackPanel x:Name="GroupedStackPanel" AreStickyGroupHeadersEnabled="True"/>
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                    </ListView>
                </ScrollViewer>
            </ListView>
        </StackPanel>


    </Grid>
</Page>
