<Page
    x:Class="MalwareToolbox.DesktopApp.Views.Tools.Process.Statistics"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:lcontrols="using:MalwareToolbox.DesktopApp.UI.Controls"
    xmlns:converters="using:MalwareToolbox.DesktopApp.UI.Converters"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    mc:Ignorable="d"
    NavigationCacheMode="Enabled">

    <Page.Resources>
        <converters:ByteSizeConverter x:Key="ByteSizeConverter" />
        <converters:NumberFormatConverter x:Key="NumberFormatConverter" />
    </Page.Resources>

    <ScrollViewer Padding="16,12,16,0">

        <GridView HorizontalContentAlignment="Stretch"
                  SelectionMode="None">
            <GridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <controls:StaggeredPanel DesiredColumnWidth="400"
                                             HorizontalAlignment="Stretch"
                                             RowSpacing="0"
                                             ColumnSpacing="0" />
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>

            <Expander HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Stretch"
                      IsExpanded="True"
                      Width="400"
                      Header="CPU">
                <StackPanel>
                    <lcontrols:KeyValueListItem Key="Cycles" 
                                                Value="{x:Bind ViewModel.Process.CycleTime, Converter={StaticResource NumberFormatConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Sum of the cycle time of all threads of the process"
                                                Margin="0,0,0,8" />
                    <lcontrols:KeyValueListItem Key="Kernel Time" 
                                                Value="{x:Bind ViewModel.Process.KernelTime, Mode=OneWay}"
                                                ToolTipService.ToolTip="Amount of time that the process has executed in kernel mode" />
                    <lcontrols:KeyValueListItem Key="User Time" 
                                                Value="{x:Bind ViewModel.Process.UserTime, Mode=OneWay}"
                                                ToolTipService.ToolTip="Amount of time that the process has executed in user mode" />
                </StackPanel>
            </Expander>

            <Expander HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Stretch"
                      IsExpanded="True"
                      Width="400"
                      Header="Memory">
                <StackPanel>
                    <lcontrols:KeyValueListItem Key="Private Bytes" 
                                                Value="{x:Bind ViewModel.Process.PagefileUsage, Converter={StaticResource ByteSizeConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Commit Charge value for this process" />
                    <lcontrols:KeyValueListItem Key="Peak Private Bytes" 
                                                Value="{x:Bind ViewModel.Process.PeakPagefileUsage, Converter={StaticResource ByteSizeConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Peak value of Commit Charge during the lifetime of this process"
                                                Margin="0,0,0,8" />
                    <lcontrols:KeyValueListItem Key="Working Set" 
                                                Value="{x:Bind ViewModel.Process.WorkingSetSize, Converter={StaticResource ByteSizeConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Working set size" />
                    <lcontrols:KeyValueListItem Key="Peak Working Set" 
                                                Value="{x:Bind ViewModel.Process.PeakWorkingSetSize, Converter={StaticResource ByteSizeConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Peak working set size"
                                                Margin="0,0,0,8" />
                    <lcontrols:KeyValueListItem Key="Paged Pool" 
                                                Value="{x:Bind ViewModel.Process.QuotaPagedPoolUsage, Converter={StaticResource ByteSizeConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Current paged pool usage" />
                    <lcontrols:KeyValueListItem Key="Peak Paged Pool" 
                                                Value="{x:Bind ViewModel.Process.QuotaPeakPagedPoolUsage, Converter={StaticResource ByteSizeConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Peak paged pool usage"
                                                Margin="0,0,0,8" />
                    <lcontrols:KeyValueListItem Key="Non Paged Pool" 
                                                Value="{x:Bind ViewModel.Process.QuotaNonPagedPoolUsage, Converter={StaticResource ByteSizeConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Current non-paged pool usage" />
                    <lcontrols:KeyValueListItem Key="Peak Non Paged Pool" 
                                                Value="{x:Bind ViewModel.Process.QuotaPeakNonPagedPoolUsage, Converter={StaticResource ByteSizeConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Peak non-paged pool usage"
                                                Margin="0,0,0,8" />
                    <lcontrols:KeyValueListItem Key="Page Faults" 
                                                Value="{x:Bind ViewModel.Process.PageFaultCount, Converter={StaticResource NumberFormatConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Number of page faults" />
                </StackPanel>
            </Expander>

            <Expander HorizontalAlignment="Stretch"
                          HorizontalContentAlignment="Stretch"
                          IsExpanded="True"
                          Width="400"
                          Header="I/O">
                <StackPanel>
                    <lcontrols:KeyValueListItem Key="Reads" 
                                                Value="{x:Bind ViewModel.Process.ReadOperationCount, Converter={StaticResource NumberFormatConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Number of read operations performed" />
                    <lcontrols:KeyValueListItem Key="Read Bytes" 
                                                Value="{x:Bind ViewModel.Process.ReadTransferCount, Converter={StaticResource ByteSizeConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Number of bytes read"
                                                Margin="0,0,0,8" />
                    <lcontrols:KeyValueListItem Key="Writes" 
                                                Value="{x:Bind ViewModel.Process.WriteOperationCount, Converter={StaticResource NumberFormatConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Number of write operations performed" />
                    <lcontrols:KeyValueListItem Key="Write Bytes" 
                                                Value="{x:Bind ViewModel.Process.WriteTransferCount, Converter={StaticResource ByteSizeConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Number of bytes written"
                                                Margin="0,0,0,8" />
                    <lcontrols:KeyValueListItem Key="Others" 
                                                Value="{x:Bind ViewModel.Process.OtherOperationCount, Converter={StaticResource NumberFormatConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Number of I/O operations performed, other than read and write operations" />
                    <lcontrols:KeyValueListItem Key="Other Bytes" 
                                                Value="{x:Bind ViewModel.Process.OtherTransferCount, Converter={StaticResource ByteSizeConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Number of bytes transferred during operations other than read and write operations" />
                </StackPanel>
            </Expander>

            <Expander HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Stretch"
                      IsExpanded="True"
                      Width="400"
                      Header="Handles">
                <StackPanel>
                    <lcontrols:KeyValueListItem Key="Handles" 
                                                Value="{x:Bind ViewModel.Process.HandlesCount, Converter={StaticResource NumberFormatConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Number of open handles" />
                    <lcontrols:KeyValueListItem Key="GDI Handles" 
                                                Value="{x:Bind ViewModel.Process.GDIHandles, Converter={StaticResource NumberFormatConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Count of graphical interface handles" />
                    <lcontrols:KeyValueListItem Key="User Handles" 
                                                Value="{x:Bind ViewModel.Process.UserHandles, Converter={StaticResource NumberFormatConverter}, Mode=OneWay}"
                                                ToolTipService.ToolTip="Count of user handles" />
                </StackPanel>
            </Expander>
        </GridView>
    </ScrollViewer>
</Page>
