using System.ComponentModel;
using MalwareToolbox.DesktopApp.Core.Processes;
using MalwareToolbox.LibraryC.ProcessAnalysis;

namespace MalwareToolbox.DesktopApp.ViewModels.Tools.Process;

public class StatisticsViewModel : ToolboxViewModel
{
    private IProcess _process;

    public IProcess Process
    {
        get => _process;
        set
        {
            if (SetProperty(ref _process, value))
            {
                OnProcessChanged();
            }
        }
    }

    private void OnProcessChanged()
    {
        if (Process is ObservableProcess process)
        {
            process.PropertyChanging += (sender, args) =>
            {
                OnPropertyChanging(new PropertyChangingEventArgs("Process"));
            };

            process.PropertyChanging += (sender, args) =>
            {
                OnPropertyChanged(new PropertyChangedEventArgs("Process"));
            };
        }
    }
}
