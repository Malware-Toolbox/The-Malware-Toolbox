using CommunityToolkit.Mvvm.ComponentModel;
using MalwareToolbox.DesktopApp.Core.Navigations;
using MalwareToolbox.DesktopApp.Core.WindowFiles;

namespace MalwareToolbox.DesktopApp.ViewModels;

public class MainWindowViewModel : ToolboxViewModel
{
    private string _filePathText;

    public string FilePathText
    {
        get => _filePathText;
        set => SetProperty(ref _filePathText, value);
    }
    
    internal ToolboxNavManager NavManager { get; set; }

    public MainWindowViewModel()
    {
        FileManager.WinFileOpened += FileManager_WinFileOpened;
        FileManager.WinFileClosed += FileManager_WinFileClosed;
    }

    private void FileManager_WinFileOpened(object sender, WinFileOpenedEventArgs args)
    {
        FilePathText = args.WinFile.Path;
        NavManager.NavigateMenuItem(NavManager.SelectedMenuItem);
    }

    private void FileManager_WinFileClosed(object sender, WinFileClosedEventArgs args)
    {
        FilePathText = "";
        NavManager.NavigateMenuItem(NavManager.SelectedMenuItem);
    }
}
